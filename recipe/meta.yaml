{% set version = "0.1.5" %}

package:
  name: fluidimage
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/f/fluidimage/fluidimage-{{ version }}.tar.gz
  sha256: ace034ed3ca837a36869a55b2ef158b7527398dc04e16d19af84a68acac2cd7c

build:
  number: 0
  skip: true  # [py<39]
  entry_points:
    - fluidimviewer-pg = fluidimage.gui.pg_main:main
  script_env:
    - QT_QPA_PLATFORM=offscreen

requirements:
  build:
    - {{ compiler('cxx') }}
  host:
    - python
    - pip
    - setuptools_scm
    - transonic
    - pythran
  run:
    - python
    - transonic
    - dask
    - fluiddyn >=0.3.4
    - h5netcdf
    - h5py
    - imageio
    - matplotlib-base >=3.4
    - {{ pin_compatible('numpy') }}
    - pims
    - pyfftw >=0.10.4
    - scipy >=0.14.1
    - trio
    - ipython
    - opencv
    - transonic
    - scikit-image >=0.12.3
    - pyqt ==5.*

test:
  imports:
    - fluidimage
    - fluidimage.calcul
    - fluidimage.calcul.interpolate
    - fluidimage.calibration
    - fluidimage.data_objects
    - fluidimage.executors
    - fluidimage.gui
    - fluidimage.gui.launcher
    - fluidimage.postproc
    - fluidimage.preproc
    - fluidimage.reconstruct
    - fluidimage.topologies
    - fluidimage.util
    - fluidimage.works
    - fluidimage.works.piv
  commands:
    - fluidimviewer-pg --help
    - fluidimviewer --help

about:
  home: https://foss.heptapod.net/fluiddyn/fluidimage
  license: LicenseRef-CeCILL-B
  license_file: LICENSE.txt
  summary: libre Python framework for scientific processing of large series of images.
  description: |
    This package is young but already good enough to be used “in production”
    to display and pre-process images, compute displacement or velocity fields
    with Particle Image Velocimetry (PIV, i.e. displacements of pattern
    obtained by correlations of cropped images) and optical flow, analyze and
    display PIV fields.

  doc_url: https://fluidimage.readthedocs.io

extra:
  recipe-maintainers:
    - CyrilleBonamy
    - paugier
